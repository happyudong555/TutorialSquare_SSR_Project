<<<<<<< HEAD
<<<<<<< HEAD
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _stripAnsi = _interopRequireDefault(require("strip-ansi"));

var next = _interopRequireWildcard(require("./"));

var _errorDebug = require("../lib/error-debug");

var _onDemandEntriesClient = _interopRequireDefault(require("./on-demand-entries-client"));

var _webpackHotMiddlewareClient = _interopRequireDefault(require("./webpack-hot-middleware-client"));

var _reactHotLoader = require("react-hot-loader");

var _sourceMapSupport = require("./source-map-support");

window.next = next;
(0, next.default)({
  HotAppContainer: _reactHotLoader.AppContainer,
  ErrorDebugComponent: _errorDebug.ClientDebug,
  applySourcemaps: _sourceMapSupport.applySourcemaps,
  stripAnsi: _stripAnsi.default
}).then(function (emitter) {
  (0, _onDemandEntriesClient.default)();
  (0, _webpackHotMiddlewareClient.default)();
  var lastScroll;
=======
=======
>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
'use strict';

require('react-hot-loader/patch');

var _stripAnsi = require('strip-ansi');

var _stripAnsi2 = _interopRequireDefault(_stripAnsi);

var _ = require('./');

var next = _interopRequireWildcard(_);

var _errorDebug = require('../lib/error-debug');

var _errorDebug2 = _interopRequireDefault(_errorDebug);

var _onDemandEntriesClient = require('./on-demand-entries-client');

var _onDemandEntriesClient2 = _interopRequireDefault(_onDemandEntriesClient);

var _webpackHotMiddlewareClient = require('./webpack-hot-middleware-client');

var _webpackHotMiddlewareClient2 = _interopRequireDefault(_webpackHotMiddlewareClient);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

window.next = next;

(0, next.default)({ ErrorDebugComponent: _errorDebug2.default, stripAnsi: _stripAnsi2.default }).then(function (emitter) {
  (0, _onDemandEntriesClient2.default)();
  (0, _webpackHotMiddlewareClient2.default)();

  var lastScroll = void 0;

<<<<<<< HEAD
>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
=======
>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
  emitter.on('before-reactdom-render', function (_ref) {
    var Component = _ref.Component,
        ErrorComponent = _ref.ErrorComponent;

    // Remember scroll when ErrorComponent is being rendered to later restore it
    if (!lastScroll && Component === ErrorComponent) {
      var _window = window,
          pageXOffset = _window.pageXOffset,
          pageYOffset = _window.pageYOffset;
<<<<<<< HEAD
<<<<<<< HEAD
=======

>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
=======

>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
      lastScroll = {
        x: pageXOffset,
        y: pageYOffset
      };
    }
  });
<<<<<<< HEAD
<<<<<<< HEAD
=======

>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
=======

>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
  emitter.on('after-reactdom-render', function (_ref2) {
    var Component = _ref2.Component,
        ErrorComponent = _ref2.ErrorComponent;

    if (lastScroll && Component !== ErrorComponent) {
      // Restore scroll after ErrorComponent was replaced with a page component by HMR
      var _lastScroll = lastScroll,
          x = _lastScroll.x,
          y = _lastScroll.y;
<<<<<<< HEAD
<<<<<<< HEAD
=======

>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
=======

>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
      window.scroll(x, y);
      lastScroll = null;
    }
  });
}).catch(function (err) {
<<<<<<< HEAD
<<<<<<< HEAD
  console.error((0, _stripAnsi.default)("".concat(err.message, "\n").concat(err.stack)));
=======
  console.error((0, _stripAnsi2.default)(err.message + '\n' + err.stack));
>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
=======
  console.error((0, _stripAnsi2.default)(err.message + '\n' + err.stack));
>>>>>>> 3e7cc9eba236ff5c5205c34bae31be88b995768b
});